{"version":3,"file":"change_phone.js","sources":["pages/user/change_phone/change_phone.vue","../HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9jaGFuZ2VfcGhvbmUvY2hhbmdlX3Bob25lLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<view class=\"page_top_background\">\r\n\t\t</view>\r\n\t\t<CustomNavBar title=\"更换手机号码\"></CustomNavBar>\r\n\t\t<view class=\"settings\">\r\n\t\t\t<uni-forms :model=\"formData\" :rules=\"rules\" ref=\"formRef\">\r\n\r\n\t\t\t\t<uni-forms-item label=\"新手机号\" name=\"phone\">\r\n\t\t\t\t\t<uni-easyinput v-model=\"formData.phone\" placeholder=\"请输入新手机号\" />\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item label=\"验证码\" name=\"code\">\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<uni-easyinput v-model=\"formData.code\" placeholder=\"请输入验证码\" />\r\n\t\t\t\t\t\t<button @click=\"getCode\" :disabled=\"isCounting\">{{ countdownText }}</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t</uni-forms>\r\n\t\t</view>\r\n\t\t<view class=\"button_area\">\r\n\t\t\t<button @click=\"handleCancel\">取消</button>\r\n\t\t\t<button @click=\"handleSubmit\">确认</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive\r\n\t} from 'vue'\r\n\r\n\t// 表单数据\r\n\tconst formData = reactive({\r\n\t\tphone: '',\r\n\t\tcode: ''\r\n\t})\r\n\r\n\t// 表单验证规则\r\n\tconst rules = {\r\n\t\tphone: {\r\n\t\t\trules: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\terrorMessage: '请输入手机号'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpattern: /^1[3-9]\\d{9}$/,\r\n\t\t\t\t\terrorMessage: '手机号格式不正确'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tcode: {\r\n\t\t\trules: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\terrorMessage: '请输入验证码'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tpattern: /^\\d{6}$/,\r\n\t\t\t\t\terrorMessage: '验证码格式不正确'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tconst formRef = ref(null)\r\n\r\n\t// 验证码相关逻辑\r\n\tconst isCounting = ref(false)\r\n\tconst countdown = ref(60)\r\n\tconst countdownText = ref('获取验证码')\r\n\r\n\t// 获取验证码\r\n\tconst getCode = async () => {\r\n\t\ttry {\r\n\t\t\t// 先验证手机号\r\n\t\t\tawait formRef.value.validateField('phone')\r\n\t\t\t// 这里应该调用API发送验证码\r\n\t\t\t// await sendSmsApi(formData.phone)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '验证码已发送',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\t// 开始倒计时\r\n\t\t\tisCounting.value = true\r\n\t\t\tconst timer = setInterval(() => {\r\n\t\t\t\tcountdown.value--\r\n\t\t\t\tcountdownText.value = `${countdown.value}秒后重试`\r\n\r\n\t\t\t\tif (countdown.value <= 0) {\r\n\t\t\t\t\tclearInterval(timer)\r\n\t\t\t\t\tisCounting.value = false\r\n\t\t\t\t\tcountdown.value = 60\r\n\t\t\t\t\tcountdownText.value = '获取验证码'\r\n\t\t\t\t}\r\n\t\t\t}, 1000)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n\r\n\t// 取消按钮\r\n\tconst handleCancel = () => {\r\n\t\tuni.navigateBack()\r\n\t}\r\n\r\n\t// 提交表单\r\n\tconst handleSubmit = async () => {\r\n\t\ttry {\r\n\t\t\t// 验证表单\r\n\t\t\tawait formRef.value.validate()\r\n\r\n\t\t\t// 这里应该调用API提交表单\r\n\t\t\t// await changePhoneApi(formData)\r\n\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '手机号修改成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t\t// 返回上一页\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t}, 1500)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.form-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\r\n\t\t&>button {\r\n\t\t\tcolor: #fff;\r\n\t\t\tmargin-left: 12rpx;\r\n\t\t\tbackground: linear-gradient(to right, #394ff6, #833cfb);\r\n\t\t}\r\n\t}\r\n\r\n\t.page {\r\n\t\t.settings {\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tmargin-top: 32rpx;\r\n\t\t\twidth: 688rpx;\r\n\t\t\tpadding: 0 32rpx;\r\n\t\t\tpadding-top: 40rpx;\r\n\t\t\theight: 1160rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tbackground: rgba(255, 255, 255, 0.7);\r\n\t\t\theight: 1240rpx;\r\n\t\t\tcolor: #000 !important;\r\n\r\n\t\t\t.enterprise_recognise {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: space-evenly;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tborder-bottom: 2rpx solid #818183;\r\n\r\n\t\t\t\t.settings_content {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t.right {\r\n\t\t\t\t\t\twidth: 16rpx;\r\n\t\t\t\t\t\theight: 16rpx;\r\n\t\t\t\t\t\tborder-bottom: solid 4rpx #000;\r\n\t\t\t\t\t\tborder-right: solid 4rpx #000;\r\n\t\t\t\t\t\ttransform: rotate(-45deg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.last {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.button_area {\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tmargin-top: 66rpx;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\tbutton {\r\n\t\t\t\twidth: 300rpx;\r\n\t\t\t\theight: 72rpx;\r\n\t\t\t\tborder-radius: 60rpx;\r\n\t\t\t\tbox-shadow: 4rpx 2rpx 8rpx #eceefe;\r\n\r\n\t\t\t\t&:first-child {\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&:nth-child(2) {\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground: linear-gradient(to right, #3051f5, #893afb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/UEDAIminiprogram/pages/user/change_phone/change_phone.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","uni"],"mappings":";;;;;;;;;;;;;;;;;;;AAiCC,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,OAAO;AAAA,MACP,MAAM;AAAA,IACR,CAAE;AAGD,UAAM,QAAQ;AAAA,MACb,OAAO;AAAA,QACN,OAAO;AAAA,UAAC;AAAA,YACN,UAAU;AAAA,YACV,cAAc;AAAA,UACd;AAAA,UACD;AAAA,YACC,SAAS;AAAA,YACT,cAAc;AAAA,UACd;AAAA,QACD;AAAA,MACD;AAAA,MACD,MAAM;AAAA,QACL,OAAO;AAAA,UAAC;AAAA,YACN,UAAU;AAAA,YACV,cAAc;AAAA,UACd;AAAA,UACD;AAAA,YACC,SAAS;AAAA,YACT,cAAc;AAAA,UACd;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAED,UAAM,UAAUC,cAAG,IAAC,IAAI;AAGxB,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,YAAYA,cAAG,IAAC,EAAE;AACxB,UAAM,gBAAgBA,cAAG,IAAC,OAAO;AAGjC,UAAM,UAAU,YAAY;AAC3B,UAAI;AAEH,cAAM,QAAQ,MAAM,cAAc,OAAO;AAGzCC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAED,mBAAW,QAAQ;AACnB,cAAM,QAAQ,YAAY,MAAM;AAC/B,oBAAU;AACV,wBAAc,QAAQ,GAAG,UAAU,KAAK;AAExC,cAAI,UAAU,SAAS,GAAG;AACzB,0BAAc,KAAK;AACnB,uBAAW,QAAQ;AACnB,sBAAU,QAAQ;AAClB,0BAAc,QAAQ;AAAA,UACtB;AAAA,QACD,GAAE,GAAI;AAAA,MACP,SAAQ,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,kDAAA,CAAC;AAAA,MACf;AAAA,IACD;AAGD,UAAM,eAAe,MAAM;AAC1BA,oBAAAA,MAAI,aAAc;AAAA,IAClB;AAGD,UAAM,eAAe,YAAY;AAChC,UAAI;AAEH,cAAM,QAAQ,MAAM,SAAU;AAK9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAGD,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,aAAc;AAAA,QAClB,GAAE,IAAI;AAAA,MACP,SAAQ,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,mDAAA,CAAC;AAAA,MACf;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7HF,GAAG,WAAW,eAAe;"}